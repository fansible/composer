---
- name: Provisioning for a Symfony project
  hosts: all
  vars_files:
    - vars/main.yml
    - ../../app/config/parameters.yml
  sudo: yes
  gather_facts: true
  roles:
    - common        # Common packages to update
    - nginx-symfony
    - { role: ANXS.mysql, tags: mysql  } # Database
    - php
    - { role: kosssi.composer }
    - Stouts.iptables
    - nickjj.fail2ban
    - MaximeThoonsen.automysqlbackup

#NB: The inventory files used by ansible is located in .vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory
#This inventory is generated by vagrant
- name: Vagrant provisioning
  hosts: vagrant
  vars_files:
    - vars/vagrant/xdebug.yml
  sudo: yes
  gather_facts: true
  roles:
    - MaximeThoonsen.php5-xdebug
